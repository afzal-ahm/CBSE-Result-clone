<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CBSE RESULT</title>
    <link rel="stylesheet" href="./node_modules/bootstrap-icons/font/bootstrap-icons.css">
</head>

<style>
  
    .main {
        margin-top: 5px;
        max-width: 1100px;
        margin: auto;
        background: #fff;
        /* padding: 30px 50px; */
        border-radius: 6px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        /* border: 1px solid red; */
    }

    .heading {
        margin-top: 1px;
        padding: 1px;
        text-align: center;
        background-color: wheat;
        font-size: 25px;
        font-weight: bold;
    }

    .details{
        margin-top: 20px;
    }

    .details .row {
        /* margin-top: 20px; */
        display: flex;
        justify-content: flex-start;
        margin: 5px 0;
        margin-left: 55px;
        font-size: 20px;
    }

    .details .label {
        width: 250px;
        font-weight: bold;
    }

    .details .value {
        flex: 1;
    }

    .table {
        margin-top: 30px;
    }

    .table2 {
        border-collapse: collapse;
        width: 90%;
        margin: 0 auto;
        text-align: center;
        font-size: 14px;
        border: 5px solid black;
    }

    th,td {
        border: 1px solid #000;
        padding: 8px;
    }

    th {
        background-color: cyan;
        color: black;
        font-weight: bold;
        font-size: 20px;
    }

    tr:nth-child(even) td {
        background-color: #f9f9f9;
    }

    .table2 tr:not(.result):nth-child(odd) td {
        background-color: #ffffff;
    }

    .additional {
        background-color: #d9d9d9;
        font-weight: bold;
        text-align: center;
        font-size: 20px;
    }

    .table2 td:first-child {
        font-weight: bold;
    }

    .result {
        background-color: cyan;
        font-size: 20px;
        font-weight: bold;
        text-align: left;
        /* margin-left: 50px; */
    }

    .end {
        margin-top: 20px;
        margin-bottom: 20px;
        margin-right: 80px;
        text-align: right;
    }

    button {
        background-color: gray;
        width: 100px;
        height: 40px;
        border-radius: 10px;
        font-size: 15px;
        font-weight: bold;
        color: white;
        margin-bottom: 20px;
    }

    @media print {
        .end {
            display: none;
        }
    }
</style>

<body>

    <div class="main">
        <header class="heading">
            <span><u>CENTRAL BOARD OF SECONDARY EDUCATION</u></span><br>
            <span><u>Secondary School Examination Results 2025</u></span>
        </header>

        <div class="details">
            <div class="row"><span class="label">Roll No. :</span><span class="value" id="roll_number" >000000</span></div>
            <div class="row"><span class="label">Candidate Name :</span><span class="value" id="full_name">NA</span></div>
            <div class="row"><span class="label">Mother's Name :</span><span class="value" id="mother_name">NA</span></div>
            <div class="row"><span class="label">Father's Name :</span><span class="value" id="father_name">NA</span></div>
            <div class="row"><span class="label">Date Of Birth :</span><span class="value" id="dob">NA</span></div>
            <div class="row"><span class="label">School's Name :</span><span class="value" id="school_name">NA</span></div>
        </div>

        <div class="table">
            <table border="1" class="table2">
                <tr>
                    <th>Subject Name</th>
                    <th>Theory</th>
                    <th>Practical</th>
                    <th>Total</th>
                    <th>Positional Grade</th>
                </tr>

                <tr>
                    <td>English</td>
                    <td><span id="eng">NA</span></td>
                    <td><span id="engP">NA</span></td>
                    <td><span id="engTotal">NA</span></td>
                    <td><span id="engGrade">NA</span></td>
                </tr>

                <tr>
                    <td>Hindi</td>
                    <td><span id="hin">NA</span></td>
                    <td><span id="hinP">NA</span></td>
                    <td><span id="hinTotal">NA</span></td>
                    <td><span id="hinGrade">NA</span></td>
                </tr>

                <tr>
                    <td><span id="MatBioSubName">Mathematics</span></td>
                    <td><span id="MatBio">NA</span></td>
                    <td><span id="MatBioP">NA</span></td>
                    <td><span id="MatBioTotal">NA</span></td>
                    <td><span id="MatBioGrade">NA</span></td>
                </tr>

                <tr>
                    <td>Science</td>
                    <td><span id="sci">NA</span></td>
                    <td><span id="sciP">NA</span></td>
                    <td><span id="sciTotal">NA</span></td>
                    <td><span id="sciGrade">NA</span></td>
                </tr>

                <tr>
                    <td>Social Science</td>
                    <td><span id="soc">NA</span></td>
                    <td><span id="socP">NA</span></td>
                    <td><span id="socTotal">NA</span></td>
                    <td><span id="socGrade">NA</span></td>
                </tr>

                <tr class="additional">
                    <td colspan="6">ADDITIONAL SUBJECT</td>
                </tr>

                <tr>
                    <td><span id="PunUrdDraSubName">Punjabi</span></td>
                    <td><span id="PunUrdDra">NA</span></td>
                    <td><span id="PunUrdDraP">NA</span></td>
                    <td><span id="PunUrdDraTotal">NA</span></td>
                    <td><span id="PunUrdDraGrade">NA</span></td>
                </tr>

                <tr class="result">
                    <td></td>
                    <td colspan="5">Result : <span id="result">Pass</span></td>
                </tr>

            </table>

            <div class="end">
                <button onclick="window.location.href='index.html'"> <i class="bi bi-house"></i> Home </button>
                <button onclick="window.print()">Print</button>

            </div>
        </div>
    </div>


    <!-- <div id="result"></div> -->

  <script>
    const params = new URLSearchParams(window.location.search);
    const roll = params.get('roll');
    const school = params.get('school');
    const dob = params.get('dob');


    fetch(`/result?roll=${roll}&school=${encodeURIComponent(school)}&dob=${dob}`)
      .then(res => res.json())
      .then(data => {
        const div = document.getElementById('result');

       

        if (!data || !data.full_name) {
         alert("No record found!");
          return;
        }

        const choosingSubject = data.choosing_subject || "N/A";
        const choosingMarks = data.choosing_subject_marks || "N/A";
        const additionalSubject = data.additional_subject || "N/A";
        const additionalMarks = data.additional_subject_marks || "N/A";

        //inserting data
        //basic details
        roll_number = document.getElementById('roll_number');
        roll_number.innerHTML = data.roll_number;

        full_name = document.getElementById('full_name');
        full_name.innerHTML = data.full_name;

        mother_name = document.getElementById('mother_name');
        mother_name.innerHTML = data.mother_name;

        father_name = document.getElementById('father_name');
        father_name.innerHTML = data.father_name;

        dobdata = document.getElementById('dob');
        dobdata.innerHTML = data.dob;

        school_name = document.getElementById('school_name');
        school_name.innerHTML = data.school_name;

        //MARKS
        eng = document.getElementById('eng');
        eng.innerHTML = data.english;

        engP = document.getElementById('engP');
        engP.innerHTML = data.english_practical;

        engTotal = document.getElementById('engTotal');
        engTotal.innerHTML = data.english + data.english_practical;

        hin = document.getElementById('hin');
        hin.innerHTML = data.hindi;

        hinP = document.getElementById('hinP');
        hinP.innerHTML = data.hindi_practical;

        hinTotal = document.getElementById('hinTotal');
        hinTotal.innerHTML = data.hindi + data.hindi_practical;

        MatBioSubName = document.getElementById('MatBioSubName');
        MatBioSubName.innerHTML = choosingSubject;

        MatBio = document.getElementById('MatBio');
        MatBio.innerHTML = choosingMarks;

        MatBioP = document.getElementById('MatBioP');
        MatBioP.innerHTML = data.choosing_subject_practical;

        MatBioP = document.getElementById('MatBioTotal');
        MatBioP.innerHTML = choosingMarks + data.choosing_subject_practical;
       
        sci = document.getElementById('sci');
        sci.innerHTML = data.science;

        sciP = document.getElementById('sciP');
        sciP.innerHTML = data.science_practical;

        sciTotal = document.getElementById('sciTotal');
        sciTotal.innerHTML = data.science + data.science_practical;

        soc = document.getElementById('soc');
        soc.innerHTML = data.social_science;

        socP = document.getElementById('socP');
        socP.innerHTML = data.social_science_practical;

        socTotal = document.getElementById('socTotal');
        socTotal.innerHTML = data.social_science + data.social_science_practical;

        PunUrdDraSubName = document.getElementById('PunUrdDraSubName');
        PunUrdDraSubName.innerHTML = additionalSubject;

        PunUrdDra = document.getElementById('PunUrdDra');
        PunUrdDra.innerHTML = additionalMarks;

        PunUrdDraP = document.getElementById('PunUrdDraP');
        PunUrdDraP.innerHTML = data.additional_subject_practical;

        PunUrdDraTotal = document.getElementById('PunUrdDraTotal');
        PunUrdDraTotal.innerHTML = additionalMarks + data.additional_subject_practical;

        // GRADE AND RESULT LOGIC
        let result = true;
        totalNum = data.english + data.english_practical;
        engGrade = document.getElementById('engGrade');
        if(totalNum >= 80 && totalNum <= 100)
        {
            engGrade.innerHTML = 'A';
        }else if(totalNum >= 60 && totalNum < 80)
        {
            engGrade.innerHTML = 'B';
        }else if(totalNum >= 45 && totalNum < 60)
        {
            engGrade.innerHTML = 'C';
        }else
        {
            engGrade.innerHTML = 'F';
            result = false;
        }

        totalNum = data.hindi + data.hindi_practical;
        hinGrade = document.getElementById('hinGrade');
        if(totalNum >= 80 && totalNum <= 100)
        {
            hinGrade.innerHTML = 'A';
        }else if(totalNum >= 60 && totalNum < 80)
        {
            hinGrade.innerHTML = 'B';
        }else if(totalNum >= 45 && totalNum < 60)
        {
            hinGrade.innerHTML = 'C';
        }else
        {
            hinGrade.innerHTML = 'F';
            result = false;
        }

        totalNum = choosingMarks + data.choosing_subject_practical;
        MatBioGrade = document.getElementById('MatBioGrade');
        if(totalNum >= 80 && totalNum <= 100)
        {
            MatBioGrade.innerHTML = 'A';
        }else if(totalNum >= 60 && totalNum < 80)
        {
            MatBioGrade.innerHTML = 'B';
        }else if(totalNum >= 45 && totalNum < 60)
        {
            MatBioGrade.innerHTML = 'C';
        }else
        {
            MatBioGrade.innerHTML = 'F';
            result = false;
        }

        totalNum = data.science + data.science_practical;
        sciGrade = document.getElementById('sciGrade');
        if(totalNum >= 80 && totalNum <= 100)
        {
            sciGrade.innerHTML = 'A';
        }else if(totalNum >= 60 && totalNum < 80)
        {
            sciGrade.innerHTML = 'B';
        }else if(totalNum >= 45 && totalNum < 60)
        {
            sciGrade.innerHTML = 'C';
        }else
        {
            sciGrade.innerHTML = 'F';
            result = false;
        }

        totalNum = data.social_science + data.social_science_practical;
        socGrade = document.getElementById('socGrade');
        if(totalNum >= 80 && totalNum <= 100)
        {
            socGrade.innerHTML = 'A';
        }else if(totalNum >= 60 && totalNum < 80)
        {
            socGrade.innerHTML = 'B';
        }else if(totalNum >= 45 && totalNum < 60)
        {
            socGrade.innerHTML = 'C';
        }else
        {
            socGrade.innerHTML = 'F';
            result = false;
        }

        totalNum = additionalMarks + data.additional_subject_practical;
        PunUrdDraGrade = document.getElementById('PunUrdDraGrade');
        if(totalNum >= 80 && totalNum <= 100)
        {
            PunUrdDraGrade.innerHTML = 'A';
        }else if(totalNum >= 60 && totalNum < 80)
        {
            PunUrdDraGrade.innerHTML = 'B';
        }else if(totalNum >= 45 && totalNum < 60)
        {
            PunUrdDraGrade.innerHTML = 'C';
        }else
        {
            PunUrdDraGrade.innerHTML = 'F';
            result = false;
        }

        if(result == false)
        {
            let res = document.getElementById('result');
            res.innerHTML = 'Fail';

        }


        // div.innerHTML = `
        //   <p><strong>Roll Number:</strong> ${data.roll_number}</p>
        //   <p><strong>Name:</strong> ${data.full_name}</p>
        //   <p><strong>Father's Name:</strong> ${data.father_name}</p>
        //   <p><strong>Mother's Name:</strong> ${data.mother_name}</p>
        //   <p><strong>Date of Birth:</strong> ${data.dob}</p>
        //   <p><strong>School Name:</strong> ${data.school_name}</p>
        //   <h3>Marks</h3>
        //   <p>English: ${data.english}</p>
        //   <p>Hindi: ${data.hindi}</p>
        //   <p>${choosingSubject}: ${choosingMarks}</p>
        //   <p>Science: ${data.science}</p>
        //   <p>Social Science: ${data.social_science}</p>
        //   <p>${additionalSubject}: ${additionalMarks}</p>
        //   <p>${data.english_practical}</p>
        // `;
      });
      
  </script>


</body>

</html>